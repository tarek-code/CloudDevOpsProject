---
# Dynamic inventory: requires amazon.aws collection + boto3; filename must end with .aws_ec2.yaml
# Set ansible_ssh_private_key_file to your .pem path (e.g. ~/.ssh/jenkins_key.pem)
plugin: amazon.aws.aws_ec2
regions:
  - us-east-1
filters:
  instance-state-name: running
  tag:service: jenkins
keyed_groups:
  - key: tags.service
    prefix: service
hostnames:
  - public-ip-address
  - private-ip-address
compose:
  ansible_host: public_ip_address
  ansible_user: ec2-user
  ansible_ssh_private_key_file: "~/.ssh/jenkins_key.pem"
